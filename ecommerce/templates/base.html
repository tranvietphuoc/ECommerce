<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<!-- Use this link to display font awesome icon -->
		<link
			rel="stylesheet"
			href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
			integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ"
			crossorigin="anonymous"
		/>
		<!-- <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.min.css') }}"> -->
		<link
			rel="stylesheet"
			type="text/css"
			href="{{ url_for('static', filename='css/main.css') }}"
		/>
    <!-- select2 -->
		<link
			href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css"
			rel="stylesheet"
		/>
		{% block css %}{% endblock %}
		<title>
			{% block title %}{% endblock %}
		</title>
	</head>
	<body>
		<header>
			<nav class="nav-settings">
				<div class="home">
					<a href="{{ url_for('home.index') }}"
						>E-commerce</a
					>
					<button
						class="navbar-toggler"
						type="button"
						data-toggle="collapse"
						data-target="#navbarSupportedContent"
						aria-controls="navbarSupportedContent"
						aria-expanded="false"
						aria-label="Toggle navigation"
					>
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarSupportedContent">
						<div class="navbar-nav mr-sm-auto ml-sm-auto">
							<form action="#" class="search-form">
								<input type="search" class="search-input border-2 rounded" placeholder="Search" aria-label="Search"/>
								<button class="search-btn" type="submit">
									<i class="fas fa-search"></i>
								</button>
							</form>
						</div>
						<ul class="navbar-nav mr-sm-auto ml-sm-auto">
							<li class="nav-item active">
								<a href="{{ url_for('home.index') }}" class="nav-link"
									><span class="fas fa-home"></span>
									<span class="sr-only">(current)</span></a
								>
							</li>
						</ul>
						<ul class="navbar-nav mr-sm-auto ml-sm-auto">
							<li class="nav-item dropdown active">
								<a
									href="{{ url_for('categories.get_categories') }}"
									class="nav-link dropdown-toggle"
									id="navbarDropdown"
									role="button"
									data-toggle="dropdown"
									aria-haspopup="true"
									aria-expanded="false"
									><span class="fas fa-align-justify"></span
									><span class="sr-only">(current)</span></a
								>
								<div class="dropdown-menu" aria-labelledby="navbarDropdown">
									{% block categories %}{% endblock %}
								</div>
							</li>
						</ul>
						<ul class="navbar-nav ml-sm-auto mr-sm-auto">
							<li class="nav-item active">
								<a href="#" class="nav-link"
									><span class="fas fa-shopping-cart"></span>
									<span class="sr-only">(current)</span>
								</a>
							</li>
							{% if current_user.is_authenticated %}
							<li class="nav-item dropdown active">
								<a
									href="#"
									class="nav-link dropdown-toggle"
									id="navbarDropdown"
									role="button"
									data-toggle="dropdown"
									aria-haspopup="true"
									aria-expanded="false"
									><span class="fas fa-user"></span>
									<span> {{ current_user.user_name }}</span>
								</a>
								{% if current_user.has_role('superuser') %}
								<div class="dropdown-menu" aria-labelledby="navbarDropdown">
									<a href="/admin/" class="dropdown-item">Admin</a>
									<a href="{{ url_for('users.about') }}" class="dropdown-item"
										>About</a
									>
									<a href="{{ url_for('users.logout') }}" class="dropdown-item"
										>Log out</a
									>
								</div>
								{% else %}
								<div class="dropdown-menu" aria-labelledby="navbarDropdown">
									<a href="{{ url_for('users.about') }}" class="dropdown-item"
										>About</a
									>
									<a href="{{ url_for('users.logout') }}" class="dropdown-item"
										>Log out</a
									>
								</div>
								{% endif %}
							</li>
							{% else %}
							<li class="nav-item dropdown active">
								<a
									href="#"
									class="nav-link dropdown-toggle"
									id="navbarDropdown"
									role="button"
									data-toggle="dropdown"
									aria-haspopup="true"
									aria-expanded="false"
									><span class="fas fa-user"></span
								></a>
								<div class="dropdown-menu" aria-labelledby="navbarDropdown">
									<a href="{{ url_for('users.login') }}" class="dropdown-item"
										>Sign in</a
									>
									<a
										href="{{ url_for('users.register') }}"
										class="dropdown-item"
										>Sign up</a
									>
								</div>
							</li>
							{% endif %}
						</ul>
					</div>
				</div>
			</nav>
		</header>
		<main role="main" class="container">
			<div class="content">
				<!-- show errors -->
				<div role="alert">
					{% with messages = get_flashed_messages(with_categories=True) %}
            {% if messages %}
              {% for category, message in messages %}
					      <div class="alert alert-{{ category }}">
						      {{ message }}
					      </div>
					    {% endfor %}
            {% endif %}
          {% endwith %}
				</div>
				{% block content %}{% endblock %}
			</div>
		</main>
		{% block script %}{% endblock %}
	</body>
</html>
